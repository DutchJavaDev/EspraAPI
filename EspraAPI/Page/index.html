<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ESP32CAM Display</title>
</head>

<body>
    <template id="snapShot">
        <div class="snapShotDisplay">
            <h2></h2>
            <img src="">
        </div>
    </template>
</body>

</html>
<script>
    var url = "http://174.138.11.2:5000/api/get";
    var lastId;
    window.onload = function() {
        fetch(url, {
                method: 'GET', // *GET, POST, PUT, DELETE, etc.
                mode: 'cors', // no-cors, *cors, same-origin
                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
                credentials: 'same-origin', // include, *same-origin, omit
            }).then(response => response.json())
            .then(data => {
                data.forEach(snapshot => {
                    var id = snapshot.id;
                    var base64 = snapshot.base64SnapShot;
                    var stamp = snapshot.timeStamp;

                    var temp = document.querySelector("#snapShot");

                    var clone = temp.content.cloneNode(true);

                    clone.querySelector("h2").innerHTML = stamp;
                    clone.querySelector("img").src = base64;

                    document.body.appendChild(clone);

                    lastId = id;
                })

                setInterval();
            });
    }
</script>